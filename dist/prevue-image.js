!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.PrevueImage=t()}(this,function(){"use strict";function e(e,t,n,i,o,r,s,a,d,c){"boolean"!=typeof s&&(d=a,a=s,s=!1);var l="function"==typeof n?n.options:n;e&&e.render&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),i&&(l._scopeId=i);var u;if(r?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=u):t&&(u=s?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(l.functional){var m=l.render;l.render=function(e,t){return u.call(t),m(e,t)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return n}function t(e){return function(e,t){return n(e,t)}}function n(e,t){var n=d?t.media||"default":e,i=l[n]||(l[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);var o=t.source;if(t.map&&(o+="\n/*# sourceURL="+t.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),c.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(o),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var r=i.ids.size-1,s=document.createTextNode(o),a=i.element.childNodes;a[r]&&i.element.removeChild(a[r]),a.length?i.element.insertBefore(s,a[r]):i.element.appendChild(s)}}}var i=function(e,t){for(var n in t)e[n]=t[n];return e},o=function(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)},r=function(e){var t=void 0;return function(){return void 0===t?t=e():t}}(function(){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}),s={name:"ImagePreview",props:{img:{type:HTMLImageElement,required:!0}},data:function(){return{width:null,height:null,top:null,left:null,isActive:!1}},created:function(){var e=this,t=this.img;this.initSize();var n=document.documentElement,s=r();i(document.body.style,{overflow:"hidden",paddingRight:o()?s+"px":null});var a=t.offsetHeight/t.offsetWidth,d=t.naturalWidth>n.offsetWidth-100?n.offsetWidth-100:t.naturalWidth,c=d*a;this.$nextTick(function(){e.isActive=!0,e.width=d,e.height=c;var t=(n.clientHeight-c)/2;e.top=t>0?t:0,e.left=(n.offsetWidth-d)/2})},methods:{initSize:function(){var e=this.img,t=e.getBoundingClientRect(),n=t.top,i=t.left;this.isActive=!1,this.width=e.clientWidth,this.height=e.clientHeight,this.top=n,this.left=i},remove:function(){var e=this;this.initSize(),setTimeout(function(){e.$destroy(),e.$el.parentElement.removeChild(e.$el),i(document.body.style,{overflow:null,paddingRight:null})},300)}}},a=e,d="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase()),c=document.head||document.getElementsByTagName("head")[0],l={},u=t,m=s,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"preview-image",class:{"is-active":e.isActive},on:{click:e.remove}},[n("img",{style:{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px"},attrs:{src:e.img.src}})])},p=[];f._withStripped=!0;var h=a({render:f,staticRenderFns:p},function(e){e&&e("data-v-7565862c_0",{source:".preview-image {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 1000;\n  overflow: auto;\n  transition: background-color 0.4s cubic-bezier(0.4, 0, 0, 1) 0s;\n}\n.preview-image.is-active {\n  background-color: rgba(26, 26, 26, 0.65);\n}\n.preview-image img {\n  position: absolute;\n  transition: 0.4s cubic-bezier(0.4, 0, 0, 1) 0s;\n  cursor: zoom-out;\n}\n",map:{version:3,sources:["ImagePreview.vue"],names:[],mappings:"AAAA;EACE,eAAe;EACf,MAAM;EACN,OAAO;EACP,SAAS;EACT,QAAQ;EACR,aAAa;EACb,cAAc;EACd,+DAA+D;AACjE;AACA;EACE,wCAAwC;AAC1C;AACA;EACE,kBAAkB;EAClB,8CAA8C;EAC9C,gBAAgB;AAClB",file:"ImagePreview.vue",sourcesContent:[".preview-image {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 1000;\n  overflow: auto;\n  transition: background-color 0.4s cubic-bezier(0.4, 0, 0, 1) 0s;\n}\n.preview-image.is-active {\n  background-color: rgba(26, 26, 26, 0.65);\n}\n.preview-image img {\n  position: absolute;\n  transition: 0.4s cubic-bezier(0.4, 0, 0, 1) 0s;\n  cursor: zoom-out;\n}\n"]},media:void 0})},m,void 0,!1,void 0,u,void 0);return{install:function(e){var t={inserted:function(t,n){t.addEventListener("click",function(t){var n=t.target;if("IMG"===n.tagName){var i=document.createElement("div"),o={img:n},r=new e({el:i,render:function(e){return e(h,{props:o})}});document.body.appendChild(r.$el)}})}};e.directive("prevue-image",t)}}});
